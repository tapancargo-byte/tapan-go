{
  "meta": {
    "project": "Tapan Go Logistics & Cargo Management System",
    "date": "2025-11-19",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "Tapan Go is an internal logistics and cargo management dashboard designed to streamline warehouse, shipment, inventory, customer, invoice, air cargo manifest, and barcode tracking operations. Built on Next.js 14, React 19, and Supabase, it offers a scalable, secure, and efficient platform for operational oversight, billing enhancements, and customer self-service, featuring advanced scanning, offline sync, invoicing, and WhatsApp integration.",
  "core_goals": [
    "Ensure robust security and role-based access control for sensitive logistics data.",
    "Implement efficient and scalable data handling with server-side pagination and validation.",
    "Support comprehensive logistics operations: warehouse, shipment, inventory, manifests, barcodes, and more.",
    "Enhance billing and financial workflows with advanced invoice management, partial payments, and tax handling.",
    "Provide customers with a secure self-service portal to reduce support load.",
    "Integrate WhatsApp Business API for automated invoice and shipment notifications.",
    "Deliver offline scanning capabilities with retry and synchronization to support real-world logistics operations.",
    "Modernize UI/UX with interactive tables, sortable columns, date range filters, and advanced dashboards.",
    "Establish a resilient backend using Supabase with API routes, RLS, and migrations for extensibility and control.",
    "Provide detailed audit trails and logs for invoice generation and scan events for operational transparency."
  ],
  "key_features": [
    "Dashboard Overview: High-level stats, charts, rebel rankings, security status, widgets, and notifications.",
    "Warehouse Management: Grid view with capacity, utilization, health, and staff statistics.",
    "Shipment Tracking: Status tables with progress bars, filters, and search.",
    "Inventory Management: Stock status tracking with criticality badges and filters.",
    "Customer Management: Customer cards with activity and revenue data.",
    "Invoice Management: Enhanced invoice listing with server-side pagination, status badges, date range filtering, partial payments, tax breakdown, PDF generation, and audit logs.",
    "Aircargo Manifests & Scanner: Manifest listing and batch scanning flow to group scanned packages.",
    "Barcode Tracking & Labeling: Barcode list, scanner UI with camera and keyboard fallback, barcode generation, and labeling.",
    "Reports & Analytics: Rich visualizations using Recharts with time-series and categorical charts.",
    "Settings: Organization profile, display preferences, notifications, security settings, and integrations.",
    "Auth & Login: Supabase backed authentication and session management with role enforcement.",
    "Chat & Notifications: In-app chat modules, notification rail, and utility hooks for real-time communication.",
    "Offline Scan Queue: Local queue management for offline scanning and automatic retry synchronization.",
    "Supabase Logistics APIs: Contextual API routes for barcodes, manifests, invoices, finance, payments, search, and WhatsApp messaging.",
    "Customer Portal: Self-service login via magic link with invoice download and active shipment views.",
    "WhatsApp Integration: MVP and production modes to send invoices via WhatsApp web and Business API respectively.",
    "Security: Middleware enforcement, Row Level Security in Postgres, signed URLs for PDFs, and audit logs."
  ],
  "user_flow_summary": [
    "Users log in via Supabase authentication and access the main dashboard to view overview metrics and notifications.",
    "Warehouse managers review warehouse grids, utilization, and health status to monitor capacity and staff resources.",
    "Operators track shipments using searchable tables with filter and progress indicators.",
    "Inventory managers monitor stock levels with color-coded statuses (OK/LOW/CRITICAL) and manage restocking.",
    "Customer service roles manage customer records, shipment counts, and revenue tracking.",
    "Billing staff interact with the invoices page to filter by date range, sort statuses, and record partial payments via slide-out sheets.",
    "Operators use the barcode scanner with camera or keyboard input to scan packages, which create scan events linked to manifests.",
    "Manifest scanning sessions are finalized, grouping scans with origin, destination, and airline details for air cargo processing.",
    "Invoices can be generated server-side to include barcode images and tax breakdowns with PDFs stored securely, and downloaded or sent via WhatsApp.",
    "Customers can log into a dedicated portal with magic link authentication to download invoices and view shipments, reducing support calls.",
    "Real-time chat and notifications enable communication between staff within the application.",
    "Offline scans queue locally when disconnected and synchronize automatically when the network is available with retry mechanisms.",
    "API routes handle backend business logic including barcode resolution, manifest creation, invoice generation, and WhatsApp messaging.",
    "Administrators monitor logs of invoice generation and scanning for audit and troubleshooting, with alerts for failures sent to Slack if configured."
  ],
  "validation_criteria": [
    "Middleware correctly restricts access to authenticated users and enforces RBAC based on roles.",
    "Invoice tables load efficiently with server-side pagination and support sorting, filtering, and status badges.",
    "Date range picker filters invoices accurately across billing cycles.",
    "Partial payments processing correctly updates invoice statuses and audit logs.",
    "Barcode scanner successfully detects codes using both camera and keyboard inputs and records scan events.",
    "Manifest finalization aggregates scanned barcodes accurately and updates manifest records.",
    "Invoice PDF generation completes with barcode images embedded and tax breakdown included where applicable.",
    "Signed URLs generated for invoices and barcodes expire correctly to safeguard privacy.",
    "WhatsApp links open with correct prefilled messages and integrate seamlessly with WhatsApp Business API if configured.",
    "Offline scan queue persists locally and syncs to server upon reconnection with error retries.",
    "Zod validation prevents incorrect data submissions through API routes and client forms.",
    "Supabase RLS policies restrict data visibility appropriately per user role.",
    "UI components show loading and error states and optimistically update for snappy UX on invoice status updates.",
    "Customer portal login via magic link initiates and secures sessions distinctly from admin auth.",
    "Audit logs can be viewed in the UI for invoice generation and scanning with relevant details and filters.",
    "API endpoints return consistent, typed, and error-handled responses under normal and failure conditions."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Next.js 14 (App Router)",
      "Supabase (Postgres, Auth, Storage)",
      "Tailwind CSS",
      "Radix UI",
      "Shadcn-style UI components",
      "Recharts",
      "Puppeteer",
      "Zod",
      "React Hook Form",
      "Zustand",
      "Node.js"
    ],
    "features": [
      {
        "name": "Dashboard Overview",
        "description": "Main logistics dashboard with stats, charts, rebel ranking, security status, widget and notifications.",
        "files": [
          "app/page.tsx",
          "components/dashboard/layout/index.tsx",
          "components/dashboard/stat/*",
          "components/dashboard/chart/index.tsx",
          "components/dashboard/rebels-ranking/*",
          "components/dashboard/security-status/*",
          "components/dashboard/widget/index.tsx",
          "components/dashboard/notifications/*"
        ]
      },
      {
        "name": "Warehouse Management",
        "description": "Warehouse grid with capacity, utilization, health and summary cards.",
        "files": [
          "app/warehouse/page.tsx",
          "components/dashboard/layout/index.tsx",
          "components/ui/table.tsx",
          "components/ui/badge.tsx"
        ]
      },
      {
        "name": "Shipment Tracking",
        "description": "Shipments table with status, progress, filters and search.",
        "files": [
          "app/shipments/page.tsx",
          "components/dashboard/layout/index.tsx",
          "components/ui/table.tsx",
          "components/ui/badge.tsx",
          "components/ui/progress.tsx"
        ]
      },
      {
        "name": "Inventory Management",
        "description": "Inventory list with stock status (OK / LOW / CRITICAL) and filters.",
        "files": [
          "app/inventory/page.tsx",
          "components/dashboard/layout/index.tsx",
          "components/ui/table.tsx",
          "components/ui/badge.tsx"
        ]
      },
      {
        "name": "Customer Management",
        "description": "Customer cards with activity, shipments and revenue information.",
        "files": [
          "app/customers/page.tsx",
          "components/dashboard/layout/index.tsx",
          "components/ui/card.tsx"
        ]
      },
      {
        "name": "Invoice Management & Logs",
        "description": "Invoice listing, detail logs, and links to PDF generation pipeline.",
        "files": [
          "app/invoices/page.tsx",
          "app/invoices/[invoiceId]/page.tsx",
          "app/invoices/logs/page.tsx",
          "lib/invoicePdf.ts",
          "components/ui/table.tsx",
          "components/ui/badge.tsx"
        ]
      },
      {
        "name": "Aircargo Manifests & Scanner",
        "description": "Aircargo manifests listing plus manifest scanning flows.",
        "files": [
          "app/aircargo/page.tsx",
          "app/aircargo/manifest-scanner/page.tsx",
          "app/aircargo/scan-session/page.tsx",
          "components/dashboard/layout/index.tsx",
          "components/ui/table.tsx"
        ]
      },
      {
        "name": "Barcode Tracking, Scanning & Labeling",
        "description": "Barcode tracking table plus scanner and label generator components.",
        "files": [
          "app/barcodes/page.tsx",
          "components/barcode/barcode-scanner.tsx",
          "components/barcode/barcode-generator.tsx",
          "components/barcode/barcode-label.tsx",
          "components/ui/input.tsx",
          "components/ui/button.tsx"
        ]
      },
      {
        "name": "Reports & Analytics",
        "description": "Analytics dashboards with Recharts-based visualizations.",
        "files": [
          "app/reports/page.tsx",
          "components/dashboard/chart/index.tsx",
          "components/ui/chart.tsx"
        ]
      },
      {
        "name": "Settings",
        "description": "System settings including general, notifications, security and integrations.",
        "files": [
          "app/settings/page.tsx",
          "components/dashboard/layout/index.tsx",
          "components/ui/tabs.tsx",
          "components/ui/switch.tsx",
          "components/ui/input.tsx"
        ]
      },
      {
        "name": "Auth & Login Experience",
        "description": "Login page and auth-related types for future Supabase integration.",
        "files": [
          "app/login/page.tsx",
          "types/auth.ts",
          "lib/supabaseClient.ts",
          "lib/supabaseAdmin.ts",
          "lib/supabaseMiddleware.ts"
        ]
      },
      {
        "name": "Chat & Notifications System",
        "description": "In-app chat, mobile chat, notifications rail and utility hooks.",
        "files": [
          "components/chat/index.tsx",
          "components/chat/chat-conversation.tsx",
          "components/chat/chat-contact.tsx",
          "components/chat/mobile-chat.tsx",
          "components/dashboard/notifications/*",
          "app/notifications/page.tsx",
          "types/chat.ts",
          "hooks/use-toast.ts"
        ]
      },
      {
        "name": "Offline Scan Queue & Alerts",
        "description": "Offline scan queue management and Slack alert helpers for failed operations.",
        "files": [
          "lib/offlineScanQueue.ts",
          "lib/slackAlerts.ts"
        ]
      },
      {
        "name": "Supabase-backed Logistics APIs",
        "description": "Next.js API routes that integrate with Supabase for barcodes, invoices, manifests, finance, payments, search and WhatsApp.",
        "files": [
          "app/api/barcodes/*",
          "app/api/customers/*",
          "app/api/invoices/*",
          "app/api/manifests/*",
          "app/api/finance/*",
          "app/api/payments/*",
          "app/api/scans/*",
          "app/api/search/*",
          "app/api/ops/*",
          "app/api/whatsapp/*",
          "lib/supabaseClient.ts",
          "lib/supabaseAdmin.ts"
        ]
      },
      {
        "name": "Shared UI Component Library",
        "description": "Shared UI primitives (buttons, inputs, tables, sidebar, dialogs, etc.) used across all feature pages.",
        "files": [
          "components/ui/button.tsx",
          "components/ui/input.tsx",
          "components/ui/table.tsx",
          "components/ui/sidebar.tsx",
          "components/ui/dialog.tsx",
          "components/ui/dropdown-menu.tsx",
          "components/ui/accordion.tsx",
          "components/ui/tabs.tsx",
          "components/ui/tooltip.tsx",
          "components/ui/alert-dialog.tsx"
        ]
      },
      {
        "name": "Domain Types & Utilities",
        "description": "Shared type definitions and utility helpers for logistics data, chat and dashboard.",
        "files": [
          "types/logistics.ts",
          "types/dashboard.ts",
          "types/chat.ts",
          "lib/utils.ts",
          "lib/companyConfig.ts",
          "lib/storageHelpers.ts",
          "lib/v0-context.tsx"
        ]
      },
      {
        "name": "Test Harness (Smoke Tests)",
        "description": "Initial smoke test entrypoint for end-to-end checks.",
        "files": [
          "tests/smoke.js"
        ]
      }
    ]
  }
}
